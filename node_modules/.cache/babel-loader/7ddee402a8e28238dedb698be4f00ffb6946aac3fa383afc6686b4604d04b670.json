{"ast":null,"code":"import { useContext, useRef, useLayoutEffect } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { invariant, MotionContext, clamp, calcLength } from 'framer-motion';\nimport { MotionCanvasContext } from './MotionCanvasContext.mjs';\nconst calcBoxSize = ({\n  x,\n  y\n}) => ({\n  width: calcLength(x),\n  height: calcLength(y),\n  top: 0,\n  left: 0\n});\nfunction useLayoutCamera({\n  makeDefault = true\n}, updateCamera) {\n  const context = useContext(MotionCanvasContext);\n  invariant(Boolean(context), \"No MotionCanvas detected. Replace Canvas from @react-three/fiber with MotionCanvas from framer-motion.\");\n  const {\n    dimensions,\n    layoutCamera,\n    requestedDpr\n  } = context;\n  const advance = useThree(three => three.advance);\n  const set = useThree(three => three.set);\n  const camera = useThree(three => three.camera);\n  const size = useThree(three => three.size);\n  const gl = useThree(three => three.gl);\n  const {\n    visualElement: parentVisualElement\n  } = useContext(MotionContext);\n  const measuredLayoutSize = useRef();\n  useLayoutEffect(() => {\n    measuredLayoutSize.current = size;\n    updateCamera(size);\n    advance(performance.now());\n    const projection = parentVisualElement === null || parentVisualElement === void 0 ? void 0 : parentVisualElement.projection;\n    if (!projection) return;\n    /**\n     * When the projection of an element changes we want to update the camera\n     * with the projected dimensions.\n     */\n    const removeProjectionUpdateListener = projection.addEventListener(\"projectionUpdate\", newProjection => updateCamera(calcBoxSize(newProjection)));\n    /**\n     * When the layout of an element changes we want to update the renderer\n     * output to match the layout dimensions.\n     */\n    const removeLayoutMeasureListener = projection.addEventListener(\"measure\", newLayout => {\n      const newSize = calcBoxSize(newLayout);\n      let dpr = requestedDpr;\n      const {\n        width,\n        height\n      } = dimensions.current.size;\n      const xScale = width / newSize.width;\n      const yScale = height / newSize.height;\n      const maxScale = Math.max(xScale, yScale);\n      dpr = clamp(0.75, 4, maxScale);\n      dimensions.current = {\n        size: {\n          width: newSize.width,\n          height: newSize.height\n        },\n        dpr\n      };\n      gl.setSize(newSize.width, newSize.height);\n      gl.setPixelRatio(dpr);\n    });\n    /**\n     * When a projection animation completes we want to update the camera to\n     * match the recorded layout of the element.\n     */\n    const removeAnimationCompleteListener = projection.addEventListener(\"animationComplete\", () => {\n      const {\n        layoutBox\n      } = projection.layout || {};\n      if (layoutBox) {\n        setTimeout(() => {\n          const newSize = calcBoxSize(layoutBox);\n          updateCamera(newSize);\n          dimensions.current = {\n            size: newSize\n          };\n          gl.setSize(newSize.width, newSize.height);\n          gl.setPixelRatio(requestedDpr);\n        }, 50);\n      }\n    });\n    return () => {\n      removeProjectionUpdateListener();\n      removeLayoutMeasureListener();\n      removeAnimationCompleteListener();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useLayoutEffect(() => {\n    const {\n      current: cam\n    } = layoutCamera;\n    if (makeDefault && cam) {\n      const oldCam = camera;\n      set(() => ({\n        camera: cam\n      }));\n      return () => set(() => ({\n        camera: oldCam\n      }));\n    }\n  }, [camera, layoutCamera, makeDefault, set]);\n  return {\n    size,\n    camera,\n    cameraRef: layoutCamera\n  };\n}\nexport { useLayoutCamera };","map":{"version":3,"names":["useContext","useRef","useLayoutEffect","useThree","invariant","MotionContext","clamp","calcLength","MotionCanvasContext","calcBoxSize","x","y","width","height","top","left","useLayoutCamera","makeDefault","updateCamera","context","Boolean","dimensions","layoutCamera","requestedDpr","advance","three","set","camera","size","gl","visualElement","parentVisualElement","measuredLayoutSize","current","performance","now","projection","removeProjectionUpdateListener","addEventListener","newProjection","removeLayoutMeasureListener","newLayout","newSize","dpr","xScale","yScale","maxScale","Math","max","setSize","setPixelRatio","removeAnimationCompleteListener","layoutBox","layout","setTimeout","cam","oldCam","cameraRef"],"sources":["C:/Users/user/Desktop/Myportfolio/portfolio/MYpo/node_modules/framer-motion-3d/dist/es/components/use-layout-camera.mjs"],"sourcesContent":["import { useContext, useRef, useLayoutEffect } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { invariant, MotionContext, clamp, calcLength } from 'framer-motion';\nimport { MotionCanvasContext } from './MotionCanvasContext.mjs';\n\nconst calcBoxSize = ({ x, y }) => ({\n    width: calcLength(x),\n    height: calcLength(y),\n    top: 0,\n    left: 0,\n});\nfunction useLayoutCamera({ makeDefault = true }, updateCamera) {\n    const context = useContext(MotionCanvasContext);\n    invariant(Boolean(context), \"No MotionCanvas detected. Replace Canvas from @react-three/fiber with MotionCanvas from framer-motion.\");\n    const { dimensions, layoutCamera, requestedDpr } = context;\n    const advance = useThree((three) => three.advance);\n    const set = useThree((three) => three.set);\n    const camera = useThree((three) => three.camera);\n    const size = useThree((three) => three.size);\n    const gl = useThree((three) => three.gl);\n    const { visualElement: parentVisualElement } = useContext(MotionContext);\n    const measuredLayoutSize = useRef();\n    useLayoutEffect(() => {\n        measuredLayoutSize.current = size;\n        updateCamera(size);\n        advance(performance.now());\n        const projection = parentVisualElement === null || parentVisualElement === void 0 ? void 0 : parentVisualElement.projection;\n        if (!projection)\n            return;\n        /**\n         * When the projection of an element changes we want to update the camera\n         * with the projected dimensions.\n         */\n        const removeProjectionUpdateListener = projection.addEventListener(\"projectionUpdate\", (newProjection) => updateCamera(calcBoxSize(newProjection)));\n        /**\n         * When the layout of an element changes we want to update the renderer\n         * output to match the layout dimensions.\n         */\n        const removeLayoutMeasureListener = projection.addEventListener(\"measure\", (newLayout) => {\n            const newSize = calcBoxSize(newLayout);\n            let dpr = requestedDpr;\n            const { width, height } = dimensions.current.size;\n            const xScale = width / newSize.width;\n            const yScale = height / newSize.height;\n            const maxScale = Math.max(xScale, yScale);\n            dpr = clamp(0.75, 4, maxScale);\n            dimensions.current = {\n                size: { width: newSize.width, height: newSize.height },\n                dpr,\n            };\n            gl.setSize(newSize.width, newSize.height);\n            gl.setPixelRatio(dpr);\n        });\n        /**\n         * When a projection animation completes we want to update the camera to\n         * match the recorded layout of the element.\n         */\n        const removeAnimationCompleteListener = projection.addEventListener(\"animationComplete\", () => {\n            const { layoutBox } = projection.layout || {};\n            if (layoutBox) {\n                setTimeout(() => {\n                    const newSize = calcBoxSize(layoutBox);\n                    updateCamera(newSize);\n                    dimensions.current = { size: newSize };\n                    gl.setSize(newSize.width, newSize.height);\n                    gl.setPixelRatio(requestedDpr);\n                }, 50);\n            }\n        });\n        return () => {\n            removeProjectionUpdateListener();\n            removeLayoutMeasureListener();\n            removeAnimationCompleteListener();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    useLayoutEffect(() => {\n        const { current: cam } = layoutCamera;\n        if (makeDefault && cam) {\n            const oldCam = camera;\n            set(() => ({ camera: cam }));\n            return () => set(() => ({ camera: oldCam }));\n        }\n    }, [camera, layoutCamera, makeDefault, set]);\n    return { size, camera, cameraRef: layoutCamera };\n}\n\nexport { useLayoutCamera };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}